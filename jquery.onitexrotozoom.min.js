/*
* jQuery.OnitexRotoZoom v1.9
* Copyright 2013 Onitex LLC
* load.png icon by Yannick Lung 
*/
(function(a){jQuery.fn.simpleRotate=function(c){c=a.extend({horizontalFrames:60,verticalFrames:0,hint:"",invertControl:true,speed:-0.3,brake:0.23,clickFree:false,autostart:true,delay:0,openingSpeed:undefined,openingDuration:0,partTurn:false,loadingOnClick:false},c);
var b=function(){var d="#"+a(this).attr("id");var f=a(d).attr("src");var e=f.replace("001.","###.");var h=c.autostart?c.speed:0;
a(function(){g()});function g(){a(d).reel({frames:c.horizontalFrames,rows:c.verticalFrames,speed:h,cw:c.invertControl,wheelable:true,klass:"reelImage",cursor:"hand",images:e,hint:c.hint,brake:c.brake,clickfree:c.clickFree,delay:c.delay,entry:c.openingSpeed,opening:c.openingDuration,loops:!c.partTurn,shy:c.loadingOnClick}).attr("border","none")
}};return this.each(b)};jQuery.fn.simpleReel=jQuery.fn.simpleRotate;jQuery.fn.advancedRotate=function(c){c=a.extend({horizontalFrames:60,verticalFrames:0,hint:"",invertControl:true,speed:-0.3,brake:0.23,clickFree:false,autostart:true,delay:0,openingSpeed:undefined,openingDuration:0,partTurn:false,loadingOnClick:false,framesCounterEnabled:false,maxZoom:2,buttonsDirectoryPath:""},c);
var b=function(){var h=a(this).attr("id");var g="#"+h;var p=h+"-rotozoom-container";var o="#"+p;var u=a(g).attr("src");
var s=u.replace("001.","###.");var q=u.substring(0,u.lastIndexOf("img/"))+"buttons/";var m=(c.buttonsDirectoryPath=="")?q:c.buttonsDirectoryPath;
var O=m+"zoom_in.png";var S=m+"zoom_out.png";var Q=m+"zoom.png";var G=m+"rotate.png";var N=m+"stop.png";
var D=m+"play.png";var z=m+"load.png";var U=h+"-zoom-reel-toggle-button";var T="#"+U;var M=h+"-stop-button";
var L="#"+M;var C=h+"-play-button";var B="#"+C;var y=h+"-load-button";var x="#"+y;var A=c.maxZoom;var P=false;
var E=false;var n="zoom";var K=c.autostart?c.speed:0;a(function(){var V=new Image();V.onload=function(){V.onload=null;
t()};V.src=O});a(function(){var V=new Image();V.onload=function(){V.onload=null};V.src=S});function t(){I();
i();if(c.loadingOnClick){k();a(g+","+x).click(function(){a(g).unbind("click");H();a(x).remove()})}else{H()
}}function H(){j();d();l()}function i(){a(g).wrap("<div></div>").parent().attr("id",p);a(o).css({display:"inline-block",position:"relative","z-index":"100"})
}function j(){a(o).prepend('<div class="rotozoom-control-panel"><img id="'+U+'" src="'+Q+'" alt="Zoom" /><img id="'+M+'" src="'+N+'" alt="Stop" /><img id="'+C+'" src="'+D+'" alt="Play" /><div id="frameCounter"></div></div>');
a(".rotozoom-control-panel").css({bottom:"4px",left:"4px",position:"absolute","z-index":"900"})}function I(){a(g).css("cursor","url(http://code.vostrel.cz/jquery.reel-drag.cur), auto")
}function k(){a(o).append('<img id="'+y+'" src="'+z+'" alt="Load" />');a(x).css({position:"absolute","z-index":"900",bottom:"4px",left:"4px"})
}function v(){a(g).reel({frames:c.horizontalFrames,rows:c.verticalFrames,speed:K,cw:c.invertControl,wheelable:true,klass:"rotating-image",cursor:"hand",images:s,hint:c.hint,brake:c.brake,clickfree:c.clickFree,delay:c.delay,entry:c.openingSpeed,opening:c.openingDuration,loops:!c.partTurn}).attr("border","none");
E=true}function w(){a(g).onitexzoom({showControls:true,zoomIn:O,zoomOut:S,maxZoom:A,opacity:1,controlsPos:["4px","4px"],sensivity:12,resetImage:true});
P=true}function l(){a(L).click(function(){a(g).trigger("stop")});a(B).click(function(){a(g).trigger("play",c.speed)
});a(T).click(function(){if(n=="zoom"){e()}else{if(n=="reel"){d()}}})}function f(){if(P){R()}if(E){F()
}}function R(){a(g).onitexzoom("destroy");a(g).css({position:"relative",top:"0",left:"0"});P=false}function F(){a(g).unreel();
E=false}function e(){var V=a(g).attr("src");var W=V.replace("img","img_zoom");f();a(T).attr("src",G);
n="reel";a(g).attr("src",V);a(g).attr("src-big",W);r();w()}function d(){f();a(T).attr("src",Q);n="zoom";
J();v()}if(c.framesCounterEnabled){a(g).bind("reelingChange",function(){var V=a(g).reel("frame");a("#frameCounter").text("Current frame: "+V)
})}function r(){a(L).hide();a(B).hide()}function J(){a(L).show();a(B).show()}};return this.each(b)};jQuery.fn.reelWithZoom=jQuery.fn.advancedRotate
})(jQuery);